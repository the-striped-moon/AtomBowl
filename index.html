<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atom Bowl - Science Bowl Training</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap');
        
        :root { font-family: 'Inter', sans-serif; }
        .font-serif { font-family: 'Crimson Pro', serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .animate-fadeIn { animation: fadeIn 0.3s ease; }
        .animate-slideUp { animation: slideUp 0.3s ease; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
        }
    </style>
</head>
<body class="bg-[#0a0c10]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        /** * SVG ICON COMPONENTS 
         */
        const Icons = {
            Target: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
                </svg>
            ),
            Sparkles: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/>
                </svg>
            ),
            ClipboardList: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M9 12h6"/><path d="M9 16h6"/><path d="M9 8h6"/>
                </svg>
            ),
            History: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/>
                </svg>
            ),
            Settings: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/>
                </svg>
            ),
            Trophy: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
                </svg>
            ),
            Database: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/><path d="M3 12c0 1.66 4 3 9 3s9-1.34 9-3"/>
                </svg>
            ),
            Zap: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                </svg>
            ),
            Loader2: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className + " animate-spin"}>
                    <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
                </svg>
            ),
            X: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            ),
            AlertCircle: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
            ),
            TrendingUp: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>
                </svg>
            ),
            Brain: ({ size = 24, className = "" }) => (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-2.04Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-2.04Z"/>
                </svg>
            )
        };

        const CATEGORIES = ["Biology", "Chemistry", "Physics", "Earth Science", "Space Science", "Math", "Energy"];
        const DIFFICULTIES = ["Easy", "Medium", "Hard"];
        const DIVISIONS = ["Middle School (Div B)", "High School (Div C)"];

        const INITIAL_BANK = [
            {
                id: "official-1",
                category: "Biology",
                type: "TOSS-UP",
                qType: "Short Answer",
                question: "What is the powerhouse of the cell?",
                answer: "Mitochondrion",
                options: null,
                bonus: {
                    type: "BONUS",
                    qType: "Short Answer",
                    question: "BONUS: In what organelle does photosynthesis occur?",
                    answer: "Chloroplast",
                    options: null
                }
            }
        ];

        const API_KEY = "AIzaSyAHOGVvmBy7gYwVXW5dW7kfsOpoSUv5o-o"; 

        /** AI Logic with Exponential Backoff **/
        async function generateAIQuestions(config) {
            const systemPrompt = `You are a National Science Bowl (NSB) question generator for ${config.division}. Create ${config.count} pairs of TOSS-UP and BONUS questions. Topics: ${config.topics.join(', ')}. Return a JSON array of objects: { id, category, type: "TOSS-UP", qType: "Multiple Choice"|"Short Answer", question, options: [4 strings]|null, answer, bonus: { type: "BONUS", qType, question, options, answer } }.`;
            const userPrompt = `Generate the pairs now.`;

            let retries = 0;
            const delays = [1000, 2000, 4000, 8000, 16000];

            while (retries < 5) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: userPrompt }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] },
                            generationConfig: { responseMimeType: "application/json" }
                        })
                    });

                    if (!response.ok) throw new Error('API Request Failed');
                    const data = await response.json();
                    return JSON.parse(data.candidates?.[0]?.content?.parts?.[0]?.text);
                } catch (e) {
                    if (retries === 4) throw e;
                    await new Promise(r => setTimeout(r, delays[retries]));
                    retries++;
                }
            }
        }

        const Sidebar = ({ currentView, setView, score, bankCount }) => {
            const navItems = [
                { id: 'dashboard', label: 'Dashboard', icon: Icons.Target },
                { id: 'generate', label: 'AI Generator', icon: Icons.Sparkles },
                { id: 'shotput', label: 'Shot Put', icon: Icons.ClipboardList },
                { id: 'review', label: 'Review', icon: Icons.History },
                { id: 'settings', label: 'Settings', icon: Icons.Settings },
            ];

            return (
                <div className="w-64 h-screen bg-[#0a0c10] text-slate-100 flex flex-col border-r border-slate-800 shrink-0">
                    <div className="p-8 border-b border-slate-800">
                        <h1 className="text-2xl font-serif font-bold italic tracking-tight text-emerald-400">Atom Bowl</h1>
                        <div className="mt-4 p-3 bg-[#11141b] rounded-xl border border-slate-800 flex items-center justify-between">
                            <Icons.Trophy size={16} className="text-yellow-500" />
                            <span className="font-mono text-xl text-white font-bold">{score}</span>
                        </div>
                    </div>
                    <nav className="flex-1 p-4 space-y-1 mt-4">
                        {navItems.map((item) => {
                            const Icon = item.icon;
                            return (
                                <button
                                    key={item.id}
                                    onClick={() => setView(item.id)}
                                    className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ${currentView === item.id ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'text-slate-400 hover:text-white hover:bg-slate-900'}`}
                                >
                                    <Icon size={18} />
                                    <span className="font-semibold text-sm tracking-tight">{item.label}</span>
                                </button>
                            );
                        })}
                    </nav>
                    <div className="p-6 border-t border-slate-800 bg-[#0d0f14]">
                        <div className="flex items-center justify-between text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-2">
                            <span>Global Bank</span>
                            <Icons.Database size={12} />
                        </div>
                        <div className="text-lg font-mono font-bold text-slate-300">{bankCount.toLocaleString()}</div>
                    </div>
                </div>
            );
        };

        const ShotPutPlayer = ({ activeSet, onScoreChange, onComplete }) => {
            const [qIndex, setQIndex] = useState(0);
            const [isBonus, setIsBonus] = useState(false);
            const [displayedText, setDisplayedText] = useState("");
            const [isReading, setIsReading] = useState(true);
            const [isBuzzed, setIsBuzzed] = useState(false);
            const [input, setInput] = useState('');
            const [feedback, setFeedback] = useState(null);
            const scrollRef = useRef(null);

            const currentPair = activeSet[qIndex];
            const currentQ = isBonus ? currentPair.bonus : currentPair;

            useEffect(() => {
                if (!isReading) return;
                const words = currentQ.question.split(" ");
                let i = 0;
                setDisplayedText("");
                const interval = setInterval(() => {
                    if (i < words.length) {
                        setDisplayedText(prev => prev + (prev ? " " : "") + words[i]);
                        i++;
                    } else {
                        setIsReading(false);
                        clearInterval(interval);
                    }
                }, 150);
                return () => clearInterval(interval);
            }, [currentQ, isReading]);

            const handleBuzz = useCallback(() => {
                if (!isBuzzed && !feedback) {
                    setIsReading(false);
                    setIsBuzzed(true);
                }
            }, [isBuzzed, feedback]);

            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.code === "Space") {
                        e.preventDefault();
                        handleBuzz();
                    }
                };
                window.addEventListener("keydown", handleKeyDown);
                return () => window.removeEventListener("keydown", handleKeyDown);
            }, [handleBuzz]);

            const handleSubmit = (e) => {
                e?.preventDefault();
                const isCorrect = input.trim().toLowerCase() === currentQ.answer.toLowerCase() ||
                    (currentQ.qType === "Multiple Choice" && input.trim().toUpperCase() === currentQ.answer.trim().toUpperCase().charAt(0));
                
                onScoreChange(isCorrect ? (isBonus ? 10 : 4) : (isReading ? -4 : 0));
                setFeedback(isCorrect ? 'correct' : 'incorrect');
                setIsBuzzed(false);
                setDisplayedText(currentQ.question);
            };

            const handleNext = () => {
                if (!isBonus && feedback === 'correct') {
                    setIsBonus(true);
                    resetQ();
                } else if (qIndex < activeSet.length - 1) {
                    setQIndex(qIndex + 1);
                    setIsBonus(false);
                    resetQ();
                } else {
                    onComplete();
                }
            };

            const resetQ = () => {
                setDisplayedText("");
                setIsReading(true);
                setIsBuzzed(false);
                setInput('');
                setFeedback(null);
            };

            return (
                <div className="h-full flex flex-col items-center justify-center p-6 bg-[#0a0c10]/80 backdrop-blur-md">
                    <div className="w-full max-w-4xl bg-[#11141b] rounded-[32px] border border-slate-800 shadow-2xl overflow-hidden flex flex-col min-h-[500px]">
                        <div className="p-6 border-b border-slate-800 flex justify-between items-center">
                            <div className="flex gap-2">
                                <span className={`px-4 py-1.5 rounded-full text-[11px] font-bold tracking-tight ${isBonus ? 'bg-purple-600' : 'bg-emerald-600'} text-white`}>
                                    {isBonus ? 'Bonus' : 'Toss-Up'}
                                </span>
                                <span className="text-slate-500 text-xs font-bold self-center uppercase">{currentPair.category}</span>
                            </div>
                            <button onClick={onComplete} className="text-slate-500 hover:text-white transition-colors"><Icons.X size={20}/></button>
                        </div>
                        <div className="flex-1 p-12 text-3xl font-serif font-medium leading-relaxed text-slate-100 overflow-y-auto max-h-[400px]">
                            {displayedText}
                            {isReading && <span className="inline-block w-1.5 h-10 bg-emerald-500 ml-2 animate-pulse rounded-full" />}
                            
                            {!isReading && !isBuzzed && !feedback && currentQ.options && (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8 animate-fadeIn">
                                    {currentQ.options.map((opt, idx) => (
                                        <div key={idx} className="p-4 rounded-xl border border-slate-800 bg-slate-800/30 text-lg text-slate-300">
                                            {opt}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                        <div className="p-10 bg-[#0a0c10]/50 border-t border-slate-800">
                            {isBuzzed && !feedback && (
                                <form onSubmit={handleSubmit} className="flex gap-4 animate-slideUp">
                                    <input autoFocus value={input} onChange={(e) => setInput(e.target.value)} className="flex-1 p-5 rounded-2xl bg-slate-800/50 border-2 border-emerald-500 text-white outline-none font-medium text-lg"/>
                                    <button className="px-12 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-2xl transition-all">Submit</button>
                                </form>
                            )}
                            {feedback && (
                                <div className="animate-slideUp space-y-4">
                                    <div className={`p-6 rounded-2xl border flex justify-between items-center ${feedback === 'correct' ? 'border-emerald-500/50 text-emerald-400 bg-emerald-500/5' : 'border-red-500/50 text-red-400 bg-red-500/5'}`}>
                                        <div>
                                            <span className="text-[10px] font-bold text-slate-500 uppercase block mb-1">Answer</span>
                                            <span className="text-2xl font-serif font-bold">{currentQ.answer}</span>
                                        </div>
                                        {feedback === 'correct' ? <Icons.Trophy size={28} className="text-emerald-500"/> : <Icons.AlertCircle size={28} className="text-red-500"/>}
                                    </div>
                                    <button onClick={handleNext} className="w-full py-5 bg-white text-slate-900 font-bold rounded-2xl hover:bg-emerald-500 hover:text-white transition-all shadow-lg">
                                        {feedback === 'correct' && !isBonus ? "Go to Bonus" : "Continue"}
                                    </button>
                                </div>
                            )}
                            {!isBuzzed && !feedback && (
                                <div className="text-center py-4">
                                    <p className="text-slate-500 text-sm font-medium animate-pulse">Press SPACEBAR to buzz...</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [currentView, setView] = useState('dashboard');
            const [score, setScore] = useState(0);
            const [stats, setStats] = useState({ correct: 0, total: 0, dailyTarget: 20 });
            const [activeSet, setActiveSet] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            const [config, setConfig] = useState({ 
                topics: ["Biology"], 
                difficulty: 'Medium', 
                count: 10, 
                division: 'High School (Div C)' 
            });

            const toggleTopic = (cat) => {
                setConfig(prev => ({
                    ...prev,
                    topics: prev.topics.includes(cat) ? prev.topics.filter(t => t !== cat) : [...prev.topics, cat]
                }));
            };

            const startGeneration = async () => {
                if (config.topics.length === 0) return setError("Select at least one subject concentration.");
                setLoading(true); setError(null);
                try {
                    const qs = await generateAIQuestions(config);
                    setActiveSet(qs);
                } catch (e) { setError("AI construction failed. Ensure your API Key is valid."); }
                finally { setLoading(false); }
            };

            return (
                <div className="flex h-screen w-full bg-[#0a0c10] text-slate-100 overflow-hidden font-sans">
                    <Sidebar currentView={currentView} setView={setView} score={score} bankCount={INITIAL_BANK.length} />
                    
                    <main className="flex-1 overflow-y-auto custom-scrollbar relative">
                        {activeSet ? (
                            <ShotPutPlayer 
                                activeSet={activeSet} 
                                onScoreChange={(s) => {
                                    setScore(prev => prev + s);
                                    if (s > 0) setStats(prev => ({...prev, correct: prev.correct + 1}));
                                    setStats(prev => ({...prev, total: prev.total + 1}));
                                }} 
                                onComplete={() => setActiveSet(null)} 
                            />
                        ) : (
                            <div className="p-12 max-w-6xl mx-auto space-y-12 animate-fadeIn">
                                {currentView === 'dashboard' && (
                                    <>
                                        <header>
                                            <h2 className="text-5xl font-serif font-bold text-white leading-tight">Mission Control</h2>
                                            <p className="text-slate-400 mt-2 font-medium">Analyze your National Science Bowl training progress.</p>
                                        </header>

                                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                            <div className="lg:col-span-2 bg-[#11141b] border border-slate-800 rounded-[40px] p-12 shadow-2xl relative overflow-hidden group">
                                                <div className="absolute top-0 right-0 p-12 opacity-5"><Icons.Target size={180} /></div>
                                                <div className="flex justify-between items-end mb-8 relative z-10">
                                                    <div>
                                                        <h3 className="text-[11px] font-bold text-emerald-500 uppercase tracking-widest mb-2">Daily Accuracy</h3>
                                                        <div className="text-7xl font-mono font-bold">{stats.correct}<span className="text-slate-700 text-3xl font-sans"> / {stats.dailyTarget}</span></div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className="text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-1">Efficiency</div>
                                                        <div className="text-3xl font-mono font-bold text-white">{stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0}%</div>
                                                    </div>
                                                </div>
                                                <div className="w-full bg-slate-800 h-3 rounded-full overflow-hidden relative z-10">
                                                    <div className="bg-emerald-500 h-full transition-all duration-1000" style={{ width: `${Math.min(100, (stats.correct / stats.dailyTarget) * 100)}%` }} />
                                                </div>
                                            </div>

                                            <div className="bg-[#11141b]/50 p-10 rounded-[40px] border border-slate-800 flex flex-col justify-center space-y-8">
                                                <div className="flex items-center gap-5">
                                                    <div className="p-4 bg-emerald-500/10 rounded-2xl text-emerald-500"><Icons.TrendingUp size={24}/></div>
                                                    <div><div className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Rank</div><div className="text-lg font-bold text-white">Competitive</div></div>
                                                </div>
                                                <div className="flex items-center gap-5">
                                                    <div className="p-4 bg-purple-500/10 rounded-2xl text-purple-500"><Icons.Brain size={24}/></div>
                                                    <div><div className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Active Level</div><div className="text-lg font-bold text-white">{config.division}</div></div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                            <button onClick={() => setView('generate')} className="p-10 bg-[#11141b] border border-slate-800 rounded-[32px] hover:border-emerald-500/50 transition-all text-left group shadow-lg">
                                                <Icons.Sparkles className="text-emerald-500 mb-6 group-hover:scale-110 transition-transform" size={40} />
                                                <h4 className="text-2xl font-serif font-bold text-white mb-2">Initialize Scrimmage</h4>
                                                <p className="text-slate-500 text-sm">Create focused practice sessions using adaptive AI generation.</p>
                                            </button>
                                            <button onClick={() => { setActiveSet(INITIAL_BANK); }} className="p-10 bg-[#11141b] border border-slate-800 rounded-[32px] hover:border-emerald-500/50 transition-all text-left group shadow-lg">
                                                <Icons.ClipboardList className="text-slate-400 mb-6 group-hover:scale-110 transition-transform" size={40} />
                                                <h4 className="text-2xl font-serif font-bold text-white mb-2">Shot Put</h4>
                                                <p className="text-slate-500 text-sm">Access the static repository of {INITIAL_BANK.length} official competition questions.</p>
                                            </button>
                                        </div>
                                    </>
                                )}

                                {currentView === 'generate' && (
                                    <div className="max-w-4xl mx-auto space-y-12">
                                        <header className="flex justify-between items-center">
                                            <div>
                                                <h2 className="text-4xl font-serif font-bold text-white">Setup Scrimmage</h2>
                                                <p className="text-slate-400 font-medium">Define parameters for your training session.</p>
                                            </div>
                                            <div className="text-[10px] font-bold text-emerald-500 px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-full uppercase tracking-widest">
                                                Gemini 2.5 Active
                                            </div>
                                        </header>

                                        <div className="bg-[#11141b] p-10 rounded-[40px] border border-slate-800 space-y-10 shadow-2xl">
                                            <div className="space-y-6">
                                                <label className="text-[11px] font-bold text-slate-500 uppercase tracking-widest block">Strategic Division</label>
                                                <div className="grid grid-cols-2 gap-4">
                                                    {DIVISIONS.map(d => (
                                                        <button key={d} onClick={() => setConfig({...config, division: d})} className={`py-5 rounded-2xl font-bold border transition-all text-sm ${config.division === d ? 'border-emerald-500 bg-emerald-500/10 text-emerald-400' : 'border-slate-800 text-slate-500 hover:text-slate-300'}`}>{d}</button>
                                                    ))}
                                                </div>
                                            </div>

                                            <div className="space-y-6">
                                                <label className="text-[11px] font-bold text-slate-500 uppercase tracking-widest block">Subject Concentration</label>
                                                <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                                    {CATEGORIES.map(cat => (
                                                        <button key={cat} onClick={() => toggleTopic(cat)} className={`p-4 rounded-xl text-xs font-semibold border transition-all ${config.topics.includes(cat) ? 'bg-emerald-500 border-emerald-500 text-white shadow-lg' : 'border-slate-800 text-slate-400 hover:border-slate-600'}`}>{cat}</button>
                                                    ))}
                                                </div>
                                            </div>

                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                                                <div className="space-y-6">
                                                    <label className="text-[11px] font-bold text-slate-500 uppercase tracking-widest block">Intensity</label>
                                                    <div className="flex gap-2">
                                                        {DIFFICULTIES.map(d => (
                                                            <button key={d} onClick={() => setConfig({...config, difficulty: d})} className={`flex-1 py-4 rounded-xl text-xs font-bold border transition-all ${config.difficulty === d ? 'bg-white text-slate-900 border-white' : 'border-slate-800 text-slate-500'}`}>{d}</button>
                                                        ))}
                                                    </div>
                                                </div>
                                                <div className="space-y-6">
                                                    <label className="text-[11px] font-bold text-slate-500 uppercase tracking-widest block">Packet Volume: {config.count}</label>
                                                    <input type="range" min="5" max="30" step="5" value={config.count} onChange={(e) => setConfig({...config, count: parseInt(e.target.value)})} className="w-full accent-emerald-500 h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer" />
                                                </div>
                                            </div>

                                            {error && (
                                                <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-400 text-sm flex items-center gap-3 font-medium">
                                                    <Icons.AlertCircle size={20} /> {error}
                                                </div>
                                            )}

                                            <button onClick={startGeneration} disabled={loading} className={`w-full py-7 rounded-[24px] font-bold text-white transition-all shadow-2xl flex items-center justify-center gap-3 ${loading ? 'bg-slate-800 cursor-not-allowed' : 'bg-emerald-600 hover:bg-emerald-500 hover:scale-[1.01] active:scale-[0.98]'}`}>
                                                {loading ? <Icons.Loader2 size={24}/> : <Icons.Zap size={24}/>}
                                                {loading ? "Constructing Packet..." : "Generate Session"}
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
